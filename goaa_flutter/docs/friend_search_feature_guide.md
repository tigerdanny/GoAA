# 好友搜尋功能指南

## 功能概述

在好友資訊頁面中實現了搜尋好友姓名或代碼的功能，讓用戶可以找到安裝了 GOAA 分帳神器的其他用戶並添加為好友。

## 實現的功能

### 1. 搜尋好友對話框
- **觸發方式**：點擊好友頁面的「添加好友」按鈕
- **搜尋方式**：輸入姓名或用戶代碼進行即時搜尋
- **搜尋範圍**：已安裝 GOAA 分帳神器的其他用戶

### 2. 搜尋結果顯示
- **用戶資訊**：顯示姓名、用戶代碼、在線狀態
- **在線狀態**：綠色邊框和在線指示器表示用戶在線
- **最後上線時間**：顯示用戶最後活動時間
- **頭像顯示**：使用 GOAA logo 作為預設頭像

### 3. 添加好友功能
- **確認對話框**：點擊用戶卡片或添加按鈕會彈出確認對話框
- **添加成功**：確認後將用戶添加到好友列表
- **成功提示**：顯示添加成功的 SnackBar 消息

## 技術實現

### 文件結構
```
lib/features/friends/
├── friends_screen.dart          # 主要好友頁面（包含內部搜尋對話框）
├── services/
│   └── friend_search_service.dart  # 好友搜尋服務
└── widgets/
    ├── search_friends_dialog.dart  # 獨立搜尋對話框（備用）
    └── index.dart                  # 組件導出
```

### 核心組件

#### FriendSearchService
- **功能**：模擬用戶搜尋服務
- **方法**：
  - `searchFriends(String query)`: 根據查詢搜尋用戶
  - `searchByUserCode(String userCode)`: 根據用戶代碼精確搜尋
  - `isUserCodeValid(String userCode)`: 驗證用戶代碼是否存在

#### FriendSearchResult 模型
```dart
class FriendSearchResult {
  final String name;           // 用戶姓名
  final String userCode;       // 用戶代碼
  final String email;          // 電子郵件
  final String? phone;         // 電話號碼（可選）
  final String avatar;         // 頭像路徑
  final bool isOnline;         // 在線狀態
  final DateTime lastSeen;     // 最後上線時間
}
```

## 模擬數據

系統預設包含以下測試用戶：

1. **張小明** (GA001234) - 在線
2. **李小花** (GA005678) - 離線
3. **王大力** (GA009876) - 在線  
4. **陳美麗** (GA543210) - 離線
5. **John Smith** (GA112233) - 在線

## 搜尋功能特性

### 搜尋支援
- **姓名搜尋**：支援中文和英文姓名
- **用戶代碼搜尋**：支援 GA 開頭的用戶代碼
- **電子郵件搜尋**：支援郵件地址搜尋
- **即時搜尋**：輸入時自動觸發搜尋
- **模糊匹配**：支援部分匹配搜尋

### 用戶體驗
- **網路延遲模擬**：500-1500ms 的隨機延遲
- **防抖動**：避免頻繁搜尋請求
- **狀態保持**：搜尋過程中的狀態管理
- **觸覺反饋**：添加好友時的震動反饋

## 界面設計

### 搜尋對話框
- **尺寸**：螢幕寬度 90%，高度 70%
- **圓角設計**：16px 圓角
- **顏色主題**：使用 AppColors 主題色彩

### 用戶卡片
- **佈局**：頭像 + 用戶資訊 + 添加按鈕
- **在線指示**：綠色邊框和小圓點
- **互動效果**：點擊波紋效果
- **間距**：12px 底部間距

---

*更新時間：2025-01-03*
*版本：v1.0*
